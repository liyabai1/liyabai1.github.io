window.onload = function mainStyle(){
	var pingmuwidth = document.body.clientWidth;
	var contentBoxWidth = pingmuwidth - 250;
	var contentBox = document.getElementsByClassName('contentBox')[0];
		contentBox.style.width = contentBoxWidth + "px";
}




var tag = [
	{
		icon: "imgs/icon/CYDP.svg",
		class: "CYDP",
		tagName: "创意短片",
		webItems: [
			{
				webName: "V电影",
				icon: "imgs/icon/CYDP/Vdianying.png",
				url: "https://www.vmovier.com/",
				info: "高品质短片分享平台"
			},{
				webName: "新片场",
				icon: "imgs/icon/CYDP/xinpianchang.png",
				url: "https://www.xinpianchang.com/square",
				info: "发现全球优质视频与创作人，与百万创作人一起成长"
			},{
				webName: "NOWNESS",
				icon: "imgs/icon/CYDP/NOWNESS.png",
				url: "https://www.nowness.cn/",
				info: "全球创意影像圈"
			},{
				webName: "Sandwich",
				icon: "imgs/icon/CYDP/sandwich.png",
				url: "https://sandwich.co/",
				info: "科技电视广告视频发布平台"
			},{
				webName: "天空之城",
				icon: "imgs/icon/CYDP/tiankongzhicheng.png",
				url: "https://www.skypixel.com/",
				info: "全球航拍爱好者和专业摄影师的作品社区"
			},{
				webName: "火焰之美",
				icon: "imgs/icon/CYDP/huoyanzhimei.png",
				url: "https://www.envisioningchemistry.cn/flames",
				info: "火焰之美——重现化学"
			},{
				webName: "Vimeo",
				icon: "imgs/icon/CYDP/vimeo.png",
				url: "https://vimeo.com/",
				info: "一体化视频解决方案"
			},{
				webName: "TVCBOOK",
				icon: "imgs/icon/CYDP/TVCBOOK.png",
				url: "https://www.tvcbook.com/",
				info: "你感兴趣的创意都在T站"
			},{
				webName: "shots",
				icon: "imgs/icon/CYDP/shots.png",
				url: "https://www.shots.net/",
				info: "最前沿的创意"
			},{
				webName: "AbanCommercials",
				icon: "imgs/icon/CYDP/AbanCommer.png",
				url: "https://abancommercials.com/",
				info: "美国电视广告"
			}


		]
	},
	{
		icon: "imgs/icon/JC.svg",
		class: "JC",
		tagName: "PS、Pr教程",
		webItems: [
			{
				webName: "新CG儿",
				icon: "imgs/icon/JC/CG.png",
				url: "https://www.newcger.com/",
				info: "AE模板_视频素材_免费下载"
			},{
				webName: "哔哩哔哩",
				icon: "imgs/icon/JC/bili.png",
				url: "https://www.bilibili.com/",
				info: "bilibili是国内知名的视频弹幕网站，这里有及时的动漫新番，活跃的ACG氛围，有创意的Up主。大家可以在这里找到许多欢乐。"
			},{
				webName: "cfxcamp素材库",
				icon: "imgs/icon/JC/GFXCAMP.png",
				url: "http://www.gfxcamp.com/",
				info: "最新最热CG资源分享,龋齿一号GFXCamp,CG营地,视频素材,AE模板,CG教程,插件,软件"
			},{
				webName: "网易云课堂",
				icon: "imgs/icon/JC/wyy.png",
				url: "https://study.163.com/",
				info: "悄悄变强大！！！"
			},{
				webName: "中国大学MOOC",
				icon: "imgs/icon/JC/mooc.png",
				url: "https://www.icourse163.org/",
				info: "中国大学MOOC(慕课) 是国内优质的中文MOOC学习平台，由爱课程网携手网易云课堂打造。平台拥有包括985高校在内提供的千余门课程，其中首批获得认定的国家精品在线开放课程322门，占2017年获得认定课程总数的65.7%。每一个有提升愿望的人，都可以在这里学习优质高校课程，与名师零距离交流，并获得认证证书。"
			},{
				webName: "百度",
				icon: "imgs/icon/JC/baidu.svg",
				url: "http://www.baidu.com",
				info: "全球领先的中文搜索引擎、致力于让网民更便捷地获取信息，找到所求。百度超过千亿的中文网页数据库，可以瞬间找到相关的搜索结果。"
			},{
				webName: "虎课网",
				icon: "imgs/icon/JC/huke.png",
				url: "https://huke88.com/",
				info: "虎课网是超过1800万用户信赖的自学平台，拥有海量设计、绘画、摄影、办公软件、职业技能等优质的高清教程视频，用户可以根据行业和兴趣爱好，自主选择学习内容，每天免费学习一个教程。"
			}
		]
	},
	{
		icon: "imgs/icon/CYWA.svg",
		class: "CYWA",
		tagName: "创意文案",
		webItems: [
			{
				webName: "纽约客",
				icon: "imgs/icon/CYWA/niuyueke.png",
				url: "https://www.newyorker.com/",
				info: "《纽约客》的报道、简介、突发新闻、文化报道、播客、视频和漫画。"
			},{
				webName: "itsnicethat",
				icon: "imgs/icon/CYWA/itsnicethat.png",
				url: "https://www.itsnicethat.com/",
				info: "It\'s nice that "
			},{
				webName: "Deck of Briliance",
				icon: "imgs/icon/CYWA/Deck.png",
				url: "https://deckofbrilliance.com/zh-hans/",
				info: "帮助创意专业人士产生点子"
			},{
				webName: "设计癖",
				icon: "imgs/icon/CYWA/shejipi.png",
				url: "https://www.shejipi.com/",
				info: "关注设计癖 发现好设计"
			},{
				webName: "Voicer",
				icon: "imgs/icon/CYWA/voicer.png",
				url: "http://www.voicer.me/",
				info: "分享设计和生活的美学"
			},{
				webName: "Fubiz Media",
				icon: "imgs/icon/CYWA/FM.png",
				url: "http://www.fubiz.net/contact/",
				info: ""
			},{
				webName: "Gallery",
				icon: "imgs/icon/CYWA/gallery.png",
				url: "https://www.commarts.com/gallery",
				info: "通讯艺术的项目。"
			},{
				webName: "We Heart It",
				icon: "imgs/icon/CYWA/weheartit.png",
				url: "https://weheartit.com/",
				info: "时尚、壁纸、箴言、名人等等"
			},{
				webName: "文案狗",
				icon: "imgs/icon/CYWA/wenangou.png",
				url: "http://wenangou.com/",
				info: "给文案🐶一点灵感"
			},{
				webName: "文案迷",
				icon: "imgs/icon/CYWA/wenanmi.png",
				url: "http://www.wenanmi.com/",
				info: "文字是最好的表达方式"
			},{
				webName: "书格",
				icon: "imgs/icon/CYWA/shuge.png",
				url: "https://new.shuge.org/",
				info: "有品位的数字古籍图书馆"
			},{
				webName: "Mv Cat",
				icon: "imgs/icon/CYWA/mvcat.png",
				url: "https://www.mvcat.com/",
				info: "人生如戏，戏如人生，命由己造，相由心生。"
			},{
				webName: "小鸡词典",
				icon: "imgs/icon/CYWA/xjcd.png",
				url: "https://jikipedia.com/",
				info: "查网络流行语，就上小鸡词典。小鸡词典专注于网络流行语的收录和解释，以最快的速度在全网捕捉当下的网络热词。以简单明了，清晰易懂的形式，向用户介绍网络流行语的含义、来历、传播过程和引申义。用户不仅能够通过小鸡词典了解网络用语，还能接触到小众黑话、新梗热梗、弹幕用语、方言俚语等不同的流行文化，以及网友们自主创造的旧词新解等。"
			}
			
		]
	},
	{
		icon: "imgs/icon/SQ.svg",
		class: "",
		tagName: "设计社区",
		webItems: [
			{
				webName: "豆瓣",
				icon: "imgs/icon/CYSQ/douban.png",
				url: "https://www.douban.com/",
				info: "提供图书、电影、音乐唱片的推荐、评论和价格比较，以及城市独特的文化生活。"
			}
		]
	},
	{
		icon: "imgs/icon/SC.svg",
		class: "SC",
		tagName: "素材资源",	//标签名称
		webItems: [
			{
				webName: "沙沙野",	//网站名称
				icon: "imgs/icon/SC/ssy.png",
				url: "https://www.ssyer.com/",		//网站地址
				info: "让作品遇见全世界"
			}
		]
	},
	// {
	// 	icon: "",
	// 	class: "",
	// 	tagName: "",	//标签名称
	// 	webItems: [
	// 		{
	// 			webName: "",	//网站名称
	// 			icon: "",
	// 			url: "",		//网站地址
	// 			info: ""
	// 		},{
	// 			webName: "",
	// 			icon: "",
	// 			url: "",
	// 			info: ""
	// 		}
	// 	]
	// }
]




var navTag = new Vue({
	el: "#tag",
	data: {
		tags: tag
	}
})


var webContentBox = new Vue({
	el: "#webContent",
	data: {
		tag: tag,
		colWebItems: []
	},
	methods: {
		onMosOvr: function (e) {
			e.currentTarget.lastChild.style.display = "block"
		},
		onMosOut: function (e) {
			e.currentTarget.lastChild.style.display = "none"
		},
		addToCol: function (e) {

			//获取需要添加网站在该分类内的第几个
			var webItemIndex = e.currentTarget.parentNode.dataset.index

			//获取要添加的网站是第几个分类
			var tagIndex = e.currentTarget.parentNode.parentNode.parentNode.dataset.index
			
			//获取要添加网站的信息
			var webInfo = tag[tagIndex].webItems[webItemIndex]
			


			//开始添加，1、修改vue中的data 2、修改缓存的数据

			if (!checkWebName(webInfo.url)) {	//存在
				alert("收藏中已有该网址")
			}else{	//缓存中不存在
				webContentBox.colWebItems.push(webInfo)

				var sto = webContentBox.colWebItems
					sto = JSON.stringify(sto)

				localStorage.setItem("colWebSto",sto)
			}

			

		},
		delWeb: function (e) {
			//获取需要删除网站在该分类内的第几个
			var webItemIndex = e.currentTarget.parentNode.dataset.index

			//删除已添加的网址 1、修改vue中的data 2、修改缓存的数据
			webContentBox.colWebItems.splice(webItemIndex,1)

			var sto = webContentBox.colWebItems
				sto = JSON.stringify(sto)

			localStorage.setItem("colWebSto",sto)

		}
	}
})

/**
 * 网站收藏
 * 1、判断是否存在收藏网址的缓存，无缓存表示没有收藏
 * 2、如缓存存在，将缓存添加至tag变量的第一个对象内
 */
 localStorage.getItem("colWebSto") ? addTag() : console.log("无收藏网址缓存")

 /**
  * 添加缓存至tag变量内
  */
 function addTag(){
	var temp = localStorage.getItem("colWebSto")
		temp = JSON.parse(temp)
	
	webContentBox.colWebItems = temp
 }

 /**
  * 
  * @param {网站链接} webUrl 
  * 检查该网站是否已经存在缓存中
  * 如果存在，返回false,不存在返回true
  */
function checkWebName(webUrl){
	if (!localStorage.getItem("colWebSto")) {
		return true
	}else{
		let sto = localStorage.getItem("colWebSto")
			sto = JSON.parse(sto)
		for (let i in sto) {
			if (webUrl == sto[i].url) {
				return false
			}
		}
		return true
	}
}